{"ast":null,"code":"var _jsxFileName = \"/Users/raj/MSc/BMD5302/robo-advisor/frontend/src/components/Questionnaire.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Stepper, Step, StepLabel, Typography, Button, Card, CardContent, Radio, RadioGroup, FormControlLabel, FormControl, CircularProgress, Paper, Container, Grid } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { ArrowForward, ArrowBack, CheckCircle } from '@mui/icons-material';\nimport axios from 'axios';\n\n// Configuration\n//const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// Setting axios defaults to help with potential issues\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\n// Styled components\nconst QuestionCard = styled(Card)(({\n  theme\n}) => ({\n  marginTop: theme.spacing(4),\n  marginBottom: theme.spacing(4),\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.1)',\n  borderRadius: theme.spacing(2),\n  transition: 'transform 0.3s ease-in-out',\n  '&:hover': {\n    transform: 'translateY(-5px)'\n  }\n}));\n_c = QuestionCard;\nconst OptionButton = styled(FormControlLabel)(({\n  theme,\n  selected\n}) => ({\n  width: '100%',\n  margin: theme.spacing(1, 0),\n  padding: theme.spacing(2),\n  borderRadius: theme.spacing(1),\n  border: selected ? `2px solid ${theme.palette.primary.main}` : '1px solid #e0e0e0',\n  backgroundColor: selected ? 'rgba(63, 81, 181, 0.08)' : 'white',\n  transition: 'all 0.2s ease',\n  '&:hover': {\n    backgroundColor: selected ? 'rgba(63, 81, 181, 0.12)' : 'rgba(0, 0, 0, 0.04)',\n    transform: 'scale(1.01)'\n  }\n}));\n_c2 = OptionButton;\nconst NavigationButton = styled(Button)(({\n  theme\n}) => ({\n  margin: theme.spacing(1),\n  padding: theme.spacing(1, 3),\n  borderRadius: theme.spacing(3)\n}));\n_c3 = NavigationButton;\nconst SectionHeading = styled(Typography)(({\n  theme\n}) => ({\n  marginTop: theme.spacing(2),\n  marginBottom: theme.spacing(2),\n  color: theme.palette.primary.main,\n  fontWeight: 600\n}));\n\n// Main Questionnaire Component\n_c4 = SectionHeading;\nconst Questionnaire = ({\n  onComplete\n}) => {\n  _s();\n  const [questionnaire, setQuestionnaire] = useState(null);\n  const [currentSection, setCurrentSection] = useState(0);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [responses, setResponses] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sections, setSections] = useState([]);\n\n  // Fetch questionnaire data\n  useEffect(() => {\n    const fetchQuestionnaire = async () => {\n      try {\n        setLoading(true);\n        // Add debugging logs\n        console.log('Fetching questionnaire from:', `${API_URL}/questionnaire`);\n        const response = await axios.get(`${API_URL}/questionnaire`);\n        console.log('Received questionnaire response:', response);\n\n        // Set the questionnaire data from the API response\n        setQuestionnaire(response.data);\n        console.log('Questionnaire data set:', response.data);\n\n        // Group questions by section\n        const sectionList = response.data.sections.map(section => ({\n          ...section,\n          questions: response.data.questions.filter(q => q.section === section.id)\n        }));\n        console.log('Grouped sections:', sectionList);\n        setSections(sectionList);\n\n        // Initialize responses object\n        const initialResponses = {};\n        response.data.questions.forEach(q => {\n          initialResponses[q.id] = null;\n        });\n        setResponses(initialResponses);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error details:', err);\n        // More detailed error message\n        let errorMessage = 'Failed to load questionnaire. Please try again later.';\n        if (err.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          errorMessage += ` Server responded with status ${err.response.status}.`;\n          console.error('Response data:', err.response.data);\n        } else if (err.request) {\n          // The request was made but no response was received\n          errorMessage += ' No response received from server.';\n          console.error('Request made but no response:', err.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          errorMessage += ` Error message: ${err.message}`;\n        }\n        setError(errorMessage);\n        setLoading(false);\n\n        // Optionally, fall back to mock data during debugging\n        /*\n        console.log('Using mock data as fallback');\n        const mockQuestionnaire = {\n          id: \"default_questionnaire\",\n          title: \"Investment Risk Assessment\",\n          description: \"This questionnaire will help us understand your investment goals and risk tolerance to create a personalized portfolio recommendation.\",\n          sections: [\n            {\n              id: \"demographics\",\n              title: \"Demographics & Time Horizon\",\n              description: \"Understanding your personal situation helps us determine suitable investment strategies.\",\n              weight: 1.0\n            },\n            {\n              id: \"financial\",\n              title: \"Financial Situation\",\n              description: \"Your current financial position affects how much risk is appropriate for you.\",\n              weight: 1.0\n            },\n            {\n              id: \"behavior\",\n              title: \"Investment Behavior & Reactions\",\n              description: \"How you react to market fluctuations is an important factor in determining your risk profile.\",\n              weight: 1.5\n            },\n            {\n              id: \"philosophy\",\n              title: \"Investment Philosophy & Objectives\",\n              description: \"Your personal investment approach and goals guide our recommendations.\",\n              weight: 1.3\n            },\n            {\n              id: \"scenarios\",\n              title: \"Hypothetical Scenarios\",\n              description: \"These scenarios help us gauge your risk tolerance in concrete situations.\",\n              weight: 1.2\n            }\n          ],\n          questions: [\n            // Add questions here if needed as a fallback\n          ]\n        };\n        \n        setQuestionnaire(mockQuestionnaire);\n        \n        // Group questions by section\n        const sectionList = mockQuestionnaire.sections.map(section => ({\n          ...section,\n          questions: mockQuestionnaire.questions.filter(q => q.section === section.id)\n        }));\n        \n        setSections(sectionList);\n        \n        // Initialize responses object\n        const initialResponses = {};\n        mockQuestionnaire.questions.forEach(q => {\n          initialResponses[q.id] = null;\n        });\n        setResponses(initialResponses);\n        \n        setLoading(false);\n        */\n      }\n    };\n    fetchQuestionnaire();\n  }, []);\n\n  // Get current section questions\n  const getCurrentSectionQuestions = () => {\n    if (sections.length === 0) return [];\n    return sections[currentSection].questions;\n  };\n\n  // Handle option selection\n  const handleOptionSelect = (questionId, value) => {\n    console.log('Selected option:', questionId, value);\n    setResponses({\n      ...responses,\n      [questionId]: value\n    });\n  };\n\n  // Navigation handlers\n  const handleNext = () => {\n    const sectionQuestions = getCurrentSectionQuestions();\n    if (currentQuestion < sectionQuestions.length - 1) {\n      // Move to next question in section\n      setCurrentQuestion(currentQuestion + 1);\n    } else if (currentSection < sections.length - 1) {\n      // Move to next section\n      setCurrentSection(currentSection + 1);\n      setCurrentQuestion(0);\n    } else {\n      // Questionnaire complete\n      submitQuestionnaire();\n    }\n  };\n  const handleBack = () => {\n    if (currentQuestion > 0) {\n      // Move to previous question in section\n      setCurrentQuestion(currentQuestion - 1);\n    } else if (currentSection > 0) {\n      // Move to last question of previous section\n      setCurrentSection(currentSection - 1);\n      const prevSectionQuestions = sections[currentSection - 1].questions;\n      setCurrentQuestion(prevSectionQuestions.length - 1);\n    }\n  };\n\n  // Submit questionnaire\n  const submitQuestionnaire = async () => {\n    try {\n      setLoading(true);\n      console.log('Submitting responses:', responses);\n\n      // Call the actual API endpoint\n      const response = await axios.post(`${API_URL}/complete`, {\n        responses: responses\n      });\n      console.log('Received submission response:', response);\n\n      // Call onComplete with the actual results\n      onComplete(response.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error submitting questionnaire:', err);\n      let errorMessage = 'Failed to submit your responses. Please try again later.';\n      if (err.response) {\n        errorMessage += ` Server responded with status ${err.response.status}.`;\n        console.error('Response data:', err.response.data);\n      } else if (err.request) {\n        errorMessage += ' No response received from server.';\n        console.error('Request made but no response:', err.request);\n      } else {\n        errorMessage += ` Error message: ${err.message}`;\n      }\n      setError(errorMessage);\n      setLoading(false);\n    }\n  };\n\n  // Check if current question is answered\n  const isCurrentQuestionAnswered = () => {\n    var _sectionQuestions$cur;\n    if (!questionnaire || sections.length === 0) return false;\n    const sectionQuestions = getCurrentSectionQuestions();\n    if (sectionQuestions.length === 0) return false;\n    const currentQuestionId = (_sectionQuestions$cur = sectionQuestions[currentQuestion]) === null || _sectionQuestions$cur === void 0 ? void 0 : _sectionQuestions$cur.id;\n    return responses[currentQuestionId] !== null && responses[currentQuestionId] !== undefined;\n  };\n\n  // Loading state\n  if (loading && !questionnaire) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '80vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Error state\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '80vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          p: 4,\n          maxWidth: 500,\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          color: \"error\",\n          gutterBottom: true,\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          sx: {\n            mt: 3\n          },\n          onClick: () => window.location.reload(),\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this);\n  }\n\n  // No questionnaire data\n  if (!questionnaire) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '80vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"No questionnaire available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Render the questionnaire\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        my: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        align: \"center\",\n        gutterBottom: true,\n        children: questionnaire.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), questionnaire.description && /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        align: \"center\",\n        color: \"textSecondary\",\n        paragraph: true,\n        children: questionnaire.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: currentSection,\n        alternativeLabel: true,\n        sx: {\n          mt: 4,\n          mb: 2\n        },\n        children: sections.map(section => /*#__PURE__*/_jsxDEV(Step, {\n          children: /*#__PURE__*/_jsxDEV(StepLabel, {\n            children: section.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)\n        }, section.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), sections.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeading, {\n          variant: \"h5\",\n          children: sections[currentSection].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), sections[currentSection].description && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"textSecondary\",\n          paragraph: true,\n          children: sections[currentSection].description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }, this), getCurrentSectionQuestions().length > 0 && /*#__PURE__*/_jsxDEV(QuestionCard, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: [\"Question \", currentQuestion + 1, \" of \", getCurrentSectionQuestions().length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              paragraph: true,\n              children: getCurrentSectionQuestions()[currentQuestion].text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              component: \"fieldset\",\n              fullWidth: true,\n              children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n                value: responses[getCurrentSectionQuestions()[currentQuestion].id] || '',\n                onChange: e => handleOptionSelect(getCurrentSectionQuestions()[currentQuestion].id, parseInt(e.target.value)),\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: getCurrentSectionQuestions()[currentQuestion].options.map((option, index) => /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(OptionButton, {\n                      value: option.score,\n                      control: /*#__PURE__*/_jsxDEV(Radio, {\n                        color: \"primary\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 391,\n                        columnNumber: 40\n                      }, this),\n                      label: option.text,\n                      selected: responses[getCurrentSectionQuestions()[currentQuestion].id] === option.score\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 389,\n                      columnNumber: 29\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(NavigationButton, {\n            variant: \"outlined\",\n            startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 28\n            }, this),\n            onClick: handleBack,\n            disabled: currentSection === 0 && currentQuestion === 0,\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(NavigationButton, {\n            variant: \"contained\",\n            endIcon: currentSection === sections.length - 1 && currentQuestion === getCurrentSectionQuestions().length - 1 ? /*#__PURE__*/_jsxDEV(CheckCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 130\n            }, this) : /*#__PURE__*/_jsxDEV(ArrowForward, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 148\n            }, this),\n            onClick: handleNext,\n            disabled: !isCurrentQuestionAnswered() || loading,\n            children: [currentSection === sections.length - 1 && currentQuestion === getCurrentSectionQuestions().length - 1 ? 'Submit' : 'Next', loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 24,\n              sx: {\n                ml: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 5\n  }, this);\n};\n_s(Questionnaire, \"HqVRy10c8oZBMN6cXSjWxsFP+xs=\");\n_c5 = Questionnaire;\nexport default Questionnaire;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"QuestionCard\");\n$RefreshReg$(_c2, \"OptionButton\");\n$RefreshReg$(_c3, \"NavigationButton\");\n$RefreshReg$(_c4, \"SectionHeading\");\n$RefreshReg$(_c5, \"Questionnaire\");","map":{"version":3,"names":["React","useState","useEffect","Box","Stepper","Step","StepLabel","Typography","Button","Card","CardContent","Radio","RadioGroup","FormControlLabel","FormControl","CircularProgress","Paper","Container","Grid","styled","ArrowForward","ArrowBack","CheckCircle","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","defaults","headers","common","QuestionCard","theme","marginTop","spacing","marginBottom","boxShadow","borderRadius","transition","transform","_c","OptionButton","selected","width","margin","padding","border","palette","primary","main","backgroundColor","_c2","NavigationButton","_c3","SectionHeading","color","fontWeight","_c4","Questionnaire","onComplete","_s","questionnaire","setQuestionnaire","currentSection","setCurrentSection","currentQuestion","setCurrentQuestion","responses","setResponses","loading","setLoading","error","setError","sections","setSections","fetchQuestionnaire","console","log","response","get","data","sectionList","map","section","questions","filter","q","id","initialResponses","forEach","err","errorMessage","status","request","message","getCurrentSectionQuestions","length","handleOptionSelect","questionId","value","handleNext","sectionQuestions","submitQuestionnaire","handleBack","prevSectionQuestions","post","isCurrentQuestionAnswered","_sectionQuestions$cur","currentQuestionId","undefined","sx","display","justifyContent","alignItems","height","children","fileName","_jsxFileName","lineNumber","columnNumber","elevation","p","maxWidth","textAlign","variant","gutterBottom","mt","onClick","window","location","reload","my","align","title","description","paragraph","activeStep","alternativeLabel","mb","text","component","fullWidth","onChange","e","parseInt","target","container","options","option","index","item","xs","score","control","label","startIcon","disabled","endIcon","size","ml","_c5","$RefreshReg$"],"sources":["/Users/raj/MSc/BMD5302/robo-advisor/frontend/src/components/Questionnaire.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Stepper, \n  Step, \n  StepLabel, \n  Typography, \n  Button, \n  Card, \n  CardContent, \n  Radio, \n  RadioGroup,\n  FormControlLabel,\n  FormControl, \n  CircularProgress, \n  Paper,\n  Container,\n  Grid\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { ArrowForward, ArrowBack, CheckCircle } from '@mui/icons-material';\nimport axios from 'axios';\n\n// Configuration\n//const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// Setting axios defaults to help with potential issues\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\n// Styled components\nconst QuestionCard = styled(Card)(({ theme }) => ({\n  marginTop: theme.spacing(4),\n  marginBottom: theme.spacing(4),\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.1)',\n  borderRadius: theme.spacing(2),\n  transition: 'transform 0.3s ease-in-out',\n  '&:hover': {\n    transform: 'translateY(-5px)',\n  },\n}));\n\nconst OptionButton = styled(FormControlLabel)(({ theme, selected }) => ({\n  width: '100%',\n  margin: theme.spacing(1, 0),\n  padding: theme.spacing(2),\n  borderRadius: theme.spacing(1),\n  border: selected ? `2px solid ${theme.palette.primary.main}` : '1px solid #e0e0e0',\n  backgroundColor: selected ? 'rgba(63, 81, 181, 0.08)' : 'white',\n  transition: 'all 0.2s ease',\n  '&:hover': {\n    backgroundColor: selected ? 'rgba(63, 81, 181, 0.12)' : 'rgba(0, 0, 0, 0.04)',\n    transform: 'scale(1.01)',\n  },\n}));\n\nconst NavigationButton = styled(Button)(({ theme }) => ({\n  margin: theme.spacing(1),\n  padding: theme.spacing(1, 3),\n  borderRadius: theme.spacing(3),\n}));\n\nconst SectionHeading = styled(Typography)(({ theme }) => ({\n  marginTop: theme.spacing(2),\n  marginBottom: theme.spacing(2),\n  color: theme.palette.primary.main,\n  fontWeight: 600,\n}));\n\n// Main Questionnaire Component\nconst Questionnaire = ({ onComplete }) => {\n  const [questionnaire, setQuestionnaire] = useState(null);\n  const [currentSection, setCurrentSection] = useState(0);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [responses, setResponses] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sections, setSections] = useState([]);\n\n  // Fetch questionnaire data\n  useEffect(() => {\n    const fetchQuestionnaire = async () => {\n      try {\n        setLoading(true);\n        // Add debugging logs\n        console.log('Fetching questionnaire from:', `${API_URL}/questionnaire`);\n        \n        const response = await axios.get(`${API_URL}/questionnaire`);\n        console.log('Received questionnaire response:', response);\n        \n        // Set the questionnaire data from the API response\n        setQuestionnaire(response.data);\n        console.log('Questionnaire data set:', response.data);\n        \n        // Group questions by section\n        const sectionList = response.data.sections.map(section => ({\n          ...section,\n          questions: response.data.questions.filter(q => q.section === section.id)\n        }));\n        console.log('Grouped sections:', sectionList);\n        \n        setSections(sectionList);\n        \n        // Initialize responses object\n        const initialResponses = {};\n        response.data.questions.forEach(q => {\n          initialResponses[q.id] = null;\n        });\n        setResponses(initialResponses);\n        \n        setLoading(false);\n      } catch (err) {\n        console.error('Error details:', err);\n        // More detailed error message\n        let errorMessage = 'Failed to load questionnaire. Please try again later.';\n        if (err.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          errorMessage += ` Server responded with status ${err.response.status}.`;\n          console.error('Response data:', err.response.data);\n        } else if (err.request) {\n          // The request was made but no response was received\n          errorMessage += ' No response received from server.';\n          console.error('Request made but no response:', err.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          errorMessage += ` Error message: ${err.message}`;\n        }\n        setError(errorMessage);\n        setLoading(false);\n        \n        // Optionally, fall back to mock data during debugging\n        /*\n        console.log('Using mock data as fallback');\n        const mockQuestionnaire = {\n          id: \"default_questionnaire\",\n          title: \"Investment Risk Assessment\",\n          description: \"This questionnaire will help us understand your investment goals and risk tolerance to create a personalized portfolio recommendation.\",\n          sections: [\n            {\n              id: \"demographics\",\n              title: \"Demographics & Time Horizon\",\n              description: \"Understanding your personal situation helps us determine suitable investment strategies.\",\n              weight: 1.0\n            },\n            {\n              id: \"financial\",\n              title: \"Financial Situation\",\n              description: \"Your current financial position affects how much risk is appropriate for you.\",\n              weight: 1.0\n            },\n            {\n              id: \"behavior\",\n              title: \"Investment Behavior & Reactions\",\n              description: \"How you react to market fluctuations is an important factor in determining your risk profile.\",\n              weight: 1.5\n            },\n            {\n              id: \"philosophy\",\n              title: \"Investment Philosophy & Objectives\",\n              description: \"Your personal investment approach and goals guide our recommendations.\",\n              weight: 1.3\n            },\n            {\n              id: \"scenarios\",\n              title: \"Hypothetical Scenarios\",\n              description: \"These scenarios help us gauge your risk tolerance in concrete situations.\",\n              weight: 1.2\n            }\n          ],\n          questions: [\n            // Add questions here if needed as a fallback\n          ]\n        };\n        \n        setQuestionnaire(mockQuestionnaire);\n        \n        // Group questions by section\n        const sectionList = mockQuestionnaire.sections.map(section => ({\n          ...section,\n          questions: mockQuestionnaire.questions.filter(q => q.section === section.id)\n        }));\n        \n        setSections(sectionList);\n        \n        // Initialize responses object\n        const initialResponses = {};\n        mockQuestionnaire.questions.forEach(q => {\n          initialResponses[q.id] = null;\n        });\n        setResponses(initialResponses);\n        \n        setLoading(false);\n        */\n      }\n    };\n\n    fetchQuestionnaire();\n  }, []);\n\n  // Get current section questions\n  const getCurrentSectionQuestions = () => {\n    if (sections.length === 0) return [];\n    return sections[currentSection].questions;\n  };\n\n  // Handle option selection\n  const handleOptionSelect = (questionId, value) => {\n    console.log('Selected option:', questionId, value);\n    setResponses({\n      ...responses,\n      [questionId]: value\n    });\n  };\n\n  // Navigation handlers\n  const handleNext = () => {\n    const sectionQuestions = getCurrentSectionQuestions();\n    \n    if (currentQuestion < sectionQuestions.length - 1) {\n      // Move to next question in section\n      setCurrentQuestion(currentQuestion + 1);\n    } else if (currentSection < sections.length - 1) {\n      // Move to next section\n      setCurrentSection(currentSection + 1);\n      setCurrentQuestion(0);\n    } else {\n      // Questionnaire complete\n      submitQuestionnaire();\n    }\n  };\n\n  const handleBack = () => {\n    if (currentQuestion > 0) {\n      // Move to previous question in section\n      setCurrentQuestion(currentQuestion - 1);\n    } else if (currentSection > 0) {\n      // Move to last question of previous section\n      setCurrentSection(currentSection - 1);\n      const prevSectionQuestions = sections[currentSection - 1].questions;\n      setCurrentQuestion(prevSectionQuestions.length - 1);\n    }\n  };\n\n  // Submit questionnaire\n  const submitQuestionnaire = async () => {\n    try {\n      setLoading(true);\n      console.log('Submitting responses:', responses);\n      \n      // Call the actual API endpoint\n      const response = await axios.post(`${API_URL}/complete`, {\n        responses: responses\n      });\n      console.log('Received submission response:', response);\n      \n      // Call onComplete with the actual results\n      onComplete(response.data);\n      \n      setLoading(false);\n    } catch (err) {\n      console.error('Error submitting questionnaire:', err);\n      let errorMessage = 'Failed to submit your responses. Please try again later.';\n      if (err.response) {\n        errorMessage += ` Server responded with status ${err.response.status}.`;\n        console.error('Response data:', err.response.data);\n      } else if (err.request) {\n        errorMessage += ' No response received from server.';\n        console.error('Request made but no response:', err.request);\n      } else {\n        errorMessage += ` Error message: ${err.message}`;\n      }\n      setError(errorMessage);\n      setLoading(false);\n    }\n  };\n\n  // Check if current question is answered\n  const isCurrentQuestionAnswered = () => {\n    if (!questionnaire || sections.length === 0) return false;\n    \n    const sectionQuestions = getCurrentSectionQuestions();\n    if (sectionQuestions.length === 0) return false;\n    \n    const currentQuestionId = sectionQuestions[currentQuestion]?.id;\n    return responses[currentQuestionId] !== null && responses[currentQuestionId] !== undefined;\n  };\n\n  // Loading state\n  if (loading && !questionnaire) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '80vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '80vh' }}>\n        <Paper elevation={3} sx={{ p: 4, maxWidth: 500, textAlign: 'center' }}>\n          <Typography variant=\"h5\" color=\"error\" gutterBottom>\n            Error\n          </Typography>\n          <Typography>{error}</Typography>\n          <Button \n            variant=\"contained\" \n            color=\"primary\" \n            sx={{ mt: 3 }}\n            onClick={() => window.location.reload()}\n          >\n            Try Again\n          </Button>\n        </Paper>\n      </Box>\n    );\n  }\n\n  // No questionnaire data\n  if (!questionnaire) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '80vh' }}>\n        <Typography>No questionnaire available.</Typography>\n      </Box>\n    );\n  }\n\n  // Render the questionnaire\n  return (\n    <Container maxWidth=\"md\">\n      <Box sx={{ width: '100%', my: 4 }}>\n        {/* Questionnaire Header */}\n        <Typography variant=\"h4\" align=\"center\" gutterBottom>\n          {questionnaire.title}\n        </Typography>\n        \n        {questionnaire.description && (\n          <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\" paragraph>\n            {questionnaire.description}\n          </Typography>\n        )}\n\n        {/* Progress Stepper */}\n        <Stepper activeStep={currentSection} alternativeLabel sx={{ mt: 4, mb: 2 }}>\n          {sections.map((section) => (\n            <Step key={section.id}>\n              <StepLabel>{section.title}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n\n        {/* Current Section */}\n        {sections.length > 0 && (\n          <>\n            <SectionHeading variant=\"h5\">\n              {sections[currentSection].title}\n            </SectionHeading>\n            \n            {sections[currentSection].description && (\n              <Typography variant=\"body2\" color=\"textSecondary\" paragraph>\n                {sections[currentSection].description}\n              </Typography>\n            )}\n\n            {/* Current Question */}\n            {getCurrentSectionQuestions().length > 0 && (\n              <QuestionCard>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Question {currentQuestion + 1} of {getCurrentSectionQuestions().length}\n                  </Typography>\n                  \n                  <Typography variant=\"h5\" paragraph>\n                    {getCurrentSectionQuestions()[currentQuestion].text}\n                  </Typography>\n                  \n                  <FormControl component=\"fieldset\" fullWidth>\n                    <RadioGroup\n                      value={responses[getCurrentSectionQuestions()[currentQuestion].id] || ''}\n                      onChange={(e) => handleOptionSelect(\n                        getCurrentSectionQuestions()[currentQuestion].id, \n                        parseInt(e.target.value)\n                      )}\n                    >\n                      <Grid container spacing={2}>\n                        {getCurrentSectionQuestions()[currentQuestion].options.map((option, index) => (\n                          <Grid item xs={12} key={index}>\n                            <OptionButton\n                              value={option.score}\n                              control={<Radio color=\"primary\" />}\n                              label={option.text}\n                              selected={responses[getCurrentSectionQuestions()[currentQuestion].id] === option.score}\n                            />\n                          </Grid>\n                        ))}\n                      </Grid>\n                    </RadioGroup>\n                  </FormControl>\n                </CardContent>\n              </QuestionCard>\n            )}\n\n            {/* Navigation Buttons */}\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 2 }}>\n              <NavigationButton\n                variant=\"outlined\"\n                startIcon={<ArrowBack />}\n                onClick={handleBack}\n                disabled={currentSection === 0 && currentQuestion === 0}\n              >\n                Back\n              </NavigationButton>\n              \n              <NavigationButton\n                variant=\"contained\"\n                endIcon={currentSection === sections.length - 1 && currentQuestion === getCurrentSectionQuestions().length - 1 ? <CheckCircle /> : <ArrowForward />}\n                onClick={handleNext}\n                disabled={!isCurrentQuestionAnswered() || loading}\n              >\n                {currentSection === sections.length - 1 && currentQuestion === getCurrentSectionQuestions().length - 1 ? 'Submit' : 'Next'}\n                {loading && <CircularProgress size={24} sx={{ ml: 1 }} />}\n              </NavigationButton>\n            </Box>\n          </>\n        )}\n      </Box>\n    </Container>\n  );\n};\n\nexport default Questionnaire;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}